<!DOCTYPE html>
<html>
  <head>
    <title>Chat Box</title>
  </head>
  <body>
    <h1>Chat Box</h1>

    <div id="messages"></div>

    <form id="chatForm">
      <input type="text" id="messageInput" placeholder="Nhập tin nhắn" />
      <button type="submit">Gửi</button>
    </form>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/socket.io/4.1.2/socket.io.js"></script>
    <script>
      const socket = io();

      
      socket.on('chat', (message) => {
        const messagesDiv = document.getElementById('messages');
        const newMessage = document.createElement('p');
        newMessage.textContent = message;
        messagesDiv.appendChild(newMessage);
      });

     
      document.getElementById('chatForm').addEventListener('submit', (event) => {
        event.preventDefault();
        const messageInput = document.getElementById('messageInput');
        const message = messageInput.value;
        messageInput.value = '';

        
        socket.emit('chat', message);
      });

      
      const sendChatMessage = async (message) => {
        try {
          await fetch('/api/message', {
            method: 'POST',
            headers: {
              'Content-Type': 'application/json',
            },
            body: JSON.stringify({ message }),
          });
        } catch (error) {
          console.error('Lỗi khi gửi tin nhắn qua API:', error);
        }
      };
    </script>
  </body>
</html>
